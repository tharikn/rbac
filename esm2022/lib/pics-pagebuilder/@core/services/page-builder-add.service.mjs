import { Injectable } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { PageBuilderAddURL } from '../url/page-builder-add-url.config';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "./local.service";
import * as i3 from "./data-store.service";
export class PageBuilderAddService {
    router;
    localstore;
    _storeservice;
    authorisedTabs = [];
    httpService;
    constructor(router, localstore, _storeservice) {
        this.router = router;
        this.localstore = localstore;
        this._storeservice = _storeservice;
        this._storeservice.currentStore.subscribe((res) => {
            if (res) {
                this.httpService = res['HTTPSERVICE'];
            }
        });
    }
    getFormData = new BehaviorSubject('');
    currentFormData = this.getFormData.asObservable();
    setFormData(data) {
        this.getFormData.next(data);
    }
    getBasicData = new BehaviorSubject('');
    currentBasicData = this.getBasicData.asObservable();
    setBasicData(data) {
        this.getBasicData.next(data);
    }
    getPageType = new BehaviorSubject(sessionStorage.getItem('SELECTED_PAGE'));
    currentPageType = this.getPageType.asObservable();
    setPageType(data) {
        this.getPageType.next(data);
    }
    getBasicDetailsbyId(id) {
        return this.httpService.get(PageBuilderAddURL.EndPoints.page_config.pageVersion.replace('{id}', id));
    }
    pageAlertChecking(pagename, orgid, _body) {
        return this.httpService.post(PageBuilderAddURL.EndPoints.page_config.pageExist
            .replace('{pagename}', String(pagename))
            .replace('{orgid}', String(orgid)), _body);
    }
    createPage(data) {
        return this.httpService.post(PageBuilderAddURL.EndPoints.page_config.page + '/', data);
    }
    createAssetByVersion(pageid, versionid, assetData) {
        return this.httpService.post(PageBuilderAddURL.EndPoints.page_config.assetByVersion
            .replace('{pageid}', String(pageid))
            .replace('{versionid}', String(versionid)), assetData);
    }
    getMenuList(data, id) {
        return this.httpService.post(PageBuilderAddURL.EndPoints.rbac.asset.batch + id, data);
    }
    getTableFields(param1, param2) {
        return this.httpService.get(PageBuilderAddURL.EndPoints.page_config.dbSchema + param1 + '/' + param2 + '/true/');
    }
    createReportTable(data) {
        return this.httpService.post(PageBuilderAddURL.EndPoints.report.report + '/', data);
    }
    getAllPage(url) {
        return this.httpService.get(url);
    }
    getSchema() {
        return this.httpService.get(PageBuilderAddURL.EndPoints.page_config.dbSchema);
    }
    getAllOrganisations() {
        return this.httpService.get(PageBuilderAddURL.EndPoints.rbac.organization.list + 'all');
    }
    editPageStatus(data, id) {
        return this.httpService.post(PageBuilderAddURL.EndPoints.page_config.page_lock.replace('{id}', String(id)), data);
    }
    getOrgList(orgid) {
        return this.httpService.get(PageBuilderAddURL.EndPoints.page_config.orgPageList.replace('{orgid}', orgid));
    }
    getUploadKey(data) {
        return this.httpService.post(PageBuilderAddURL.EndPoints.attachment.uploadKey, data);
    }
    getFormResponseAttachment(formid, responseid) {
        return this.httpService.get(PageBuilderAddURL.EndPoints.attachment.list.replace('{formid}', formid).replace('{responseid}', responseid));
    }
    deleteFormResponseAttachment(fileid) {
        return this.httpService.delete(PageBuilderAddURL.EndPoints.attachment.delete.replace('{fileid}', fileid));
    }
    downloadFormResponseAttachment(data) {
        return this.httpService.post(PageBuilderAddURL.EndPoints.attachment.downloadKey, data);
    }
    returnToList() {
        this.router.navigate(['/pages/page-design/list']);
    }
    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: PageBuilderAddService, deps: [{ token: i1.Router }, { token: i2.LocalService }, { token: i3.DataStoreService }], target: i0.ɵɵFactoryTarget.Injectable });
    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: PageBuilderAddService, providedIn: 'root' });
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: PageBuilderAddService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.Router }, { type: i2.LocalService }, { type: i3.DataStoreService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS1idWlsZGVyLWFkZC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvcGljcy1tb2R1bGUvcGFnZS1idWlsZGVyL3NyYy9saWIvcGljcy1wYWdlYnVpbGRlci9AY29yZS9zZXJ2aWNlcy9wYWdlLWJ1aWxkZXItYWRkLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUczQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBR3ZDLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLG9DQUFvQyxDQUFDOzs7OztBQU12RSxNQUFNLE9BQU8scUJBQXFCO0lBR1o7SUFBd0I7SUFBa0M7SUFGOUUsY0FBYyxHQUFlLEVBQUUsQ0FBQztJQUNoQyxXQUFXLENBQU07SUFDakIsWUFBb0IsTUFBYyxFQUFVLFVBQXdCLEVBQVUsYUFBK0I7UUFBekYsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFVLGVBQVUsR0FBVixVQUFVLENBQWM7UUFBVSxrQkFBYSxHQUFiLGFBQWEsQ0FBa0I7UUFDM0csSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBUSxFQUFFLEVBQUU7WUFDckQsSUFBSSxHQUFHLEVBQUU7Z0JBQ1AsSUFBSSxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUE7YUFDdEM7UUFDSCxDQUFDLENBQUMsQ0FBQTtJQUVKLENBQUM7SUFFTSxXQUFXLEdBQUcsSUFBSSxlQUFlLENBQU0sRUFBRSxDQUFDLENBQUM7SUFDbEQsZUFBZSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxFQUFFLENBQUM7SUFFbEQsV0FBVyxDQUFDLElBQUk7UUFDZCxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJ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LENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxFQUFFLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDNUcsQ0FBQztJQUVELDhCQUE4QixDQUFDLElBQUk7UUFDakMsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN6RixDQUFDO0lBQ0QsWUFBWTtRQUNWLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMseUJBQXlCLENBQUMsQ0FBQyxDQUFDO0lBQ3BELENBQUM7d0dBN0dVLHFCQUFxQjs0R0FBckIscUJBQXFCLGNBRnBCLE1BQU07OzRGQUVQLHFCQUFxQjtrQkFIakMsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7IE1lbnVJdGVtIH0gZnJvbSAncHJpbWVuZy9hcGknO1xyXG5pbXBvcnQgeyBCZWhhdmlvclN1YmplY3QgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgTG9jYWxTZXJ2aWNlIH0gZnJvbSAnLi9sb2NhbC5zZXJ2aWNlJztcclxuaW1wb3J0IHsgRGF0YVN0b3JlU2VydmljZSB9IGZyb20gJy4vZGF0YS1zdG9yZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgUGFnZUJ1aWxkZXJBZGRVUkwgfSBmcm9tICcuLi91cmwvcGFnZS1idWlsZGVyLWFkZC11cmwuY29uZmlnJztcclxuXHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBQYWdlQnVpbGRlckFkZFNlcnZpY2Uge1xyXG4gIGF1dGhvcmlzZWRUYWJzOiBNZW51SXRlbVtdID0gW107XHJcbiAgaHR0cFNlcnZpY2U6IGFueTtcclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJvdXRlcjogUm91dGVyLCBwcml2YXRlIGxvY2Fsc3RvcmU6IExvY2FsU2VydmljZSwgcHJpdmF0ZSBfc3RvcmVzZXJ2aWNlOiBEYXRhU3RvcmVTZXJ2aWNlKSB7XHJcbiAgICB0aGlzLl9zdG9yZXNlcnZpY2UuY3VycmVudFN0b3JlLnN1YnNjcmliZSgocmVzOiBhbnkpID0+IHtcclxuICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgIHRoaXMuaHR0cFNlcnZpY2UgPSByZXNbJ0hUVFBTRVJWSUNFJ11cclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Rm9ybURhdGEgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGFueT4oJycpO1xyXG4gIGN1cnJlbnRGb3JtRGF0YSA9IHRoaXMuZ2V0Rm9ybURhdGEuYXNPYnNlcnZhYmxlKCk7XHJcblxyXG4gIHNldEZvcm1EYXRhKGRhdGEpIHtcclxuICAgIHRoaXMuZ2V0Rm9ybURhdGEubmV4dChkYXRhKTtcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRCYXNpY0RhdGEgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PGFueT4oJycpO1xyXG4gIGN1cnJlbnRCYXNpY0RhdGEgPSB0aGlzLmdldEJhc2ljRGF0YS5hc09ic2VydmFibGUoKTtcclxuXHJcbiAgc2V0QmFzaWNEYXRhKGRhdGEpIHtcclxuICAgIHRoaXMuZ2V0QmFzaWNEYXRhLm5leHQoZGF0YSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIGdldFBhZ2VUeXBlID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ1NFTEVDVEVEX1BBR0UnKSk7XHJcbiAgY3VycmVudFBhZ2VUeXBlID0gdGhpcy5nZXRQYWdlVHlwZS5hc09ic2VydmFibGUoKTtcclxuXHJcbiAgc2V0UGFnZVR5cGUoZGF0YTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmdldFBhZ2VUeXBlLm5leHQoZGF0YSk7XHJcbiAgfVxyXG5cclxuICBnZXRCYXNpY0RldGFpbHNieUlkKGlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5nZXQoUGFnZUJ1aWxkZXJBZGRVUkwuRW5kUG9pbnRzLnBhZ2VfY29uZmlnLnBhZ2VWZXJzaW9uLnJlcGxhY2UoJ3tpZH0nLCBpZCkpO1xyXG4gIH1cclxuICBwYWdlQWxlcnRDaGVja2luZyhwYWdlbmFtZTogYW55LCBvcmdpZDogYW55LCBfYm9keT86IGFueSkge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFNlcnZpY2UucG9zdChcclxuICAgICAgUGFnZUJ1aWxkZXJBZGRVUkwuRW5kUG9pbnRzLnBhZ2VfY29uZmlnLnBhZ2VFeGlzdFxyXG4gICAgICAgIC5yZXBsYWNlKCd7cGFnZW5hbWV9JywgU3RyaW5nKHBhZ2VuYW1lKSlcclxuICAgICAgICAucmVwbGFjZSgne29yZ2lkfScsIFN0cmluZyhvcmdpZCkpLFxyXG4gICAgICBfYm9keVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNyZWF0ZVBhZ2UoZGF0YTogYW55KSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5wb3N0KFBhZ2VCdWlsZGVyQWRkVVJMLkVuZFBvaW50cy5wYWdlX2NvbmZpZy5wYWdlICsgJy8nLCBkYXRhKTtcclxuICB9XHJcbiAgY3JlYXRlQXNzZXRCeVZlcnNpb24ocGFnZWlkOiBhbnksIHZlcnNpb25pZDogYW55LCBhc3NldERhdGE6IGFueSkge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFNlcnZpY2UucG9zdChcclxuICAgICAgUGFnZUJ1aWxkZXJBZGRVUkwuRW5kUG9pbnRzLnBhZ2VfY29uZmlnLmFzc2V0QnlWZXJzaW9uXHJcbiAgICAgICAgLnJlcGxhY2UoJ3twYWdlaWR9JywgU3RyaW5nKHBhZ2VpZCkpXHJcbiAgICAgICAgLnJlcGxhY2UoJ3t2ZXJzaW9uaWR9JywgU3RyaW5nKHZlcnNpb25pZCkpLFxyXG4gICAgICBhc3NldERhdGFcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBnZXRNZW51TGlzdChkYXRhLCBpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFNlcnZpY2UucG9zdChQYWdlQnVpbGRlckFkZFVSTC5FbmRQb2ludHMucmJhYy5hc3NldC5iYXRjaCArIGlkLCBkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldFRhYmxlRmllbGRzKHBhcmFtMSwgcGFyYW0yKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5nZXQoUGFnZUJ1aWxkZXJBZGRVUkwuRW5kUG9pbnRzLnBhZ2VfY29uZmlnLmRiU2NoZW1hICsgcGFyYW0xICsgJy8nICsgcGFyYW0yICsgJy90cnVlLycpO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlUmVwb3J0VGFibGUoZGF0YSkge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFNlcnZpY2UucG9zdChQYWdlQnVpbGRlckFkZFVSTC5FbmRQb2ludHMucmVwb3J0LnJlcG9ydCArICcvJywgZGF0YSk7XHJcbiAgfVxyXG5cclxuICBnZXRBbGxQYWdlKHVybCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFNlcnZpY2UuZ2V0KHVybCk7XHJcbiAgfVxyXG5cclxuICBnZXRTY2hlbWEoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5nZXQoUGFnZUJ1aWxkZXJBZGRVUkwuRW5kUG9pbnRzLnBhZ2VfY29uZmlnLmRiU2NoZW1hKTtcclxuICB9XHJcblxyXG4gIGdldEFsbE9yZ2FuaXNhdGlvbnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5nZXQoUGFnZUJ1aWxkZXJBZGRVUkwuRW5kUG9pbnRzLnJiYWMub3JnYW5pemF0aW9uLmxpc3QgKyAnYWxsJyk7XHJcbiAgfVxyXG5cclxuICBlZGl0UGFnZVN0YXR1cyhkYXRhLCBpZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaHR0cFNlcnZpY2UucG9zdChQYWdlQnVpbGRlckFkZFVSTC5FbmRQb2ludHMucGFnZV9jb25maWcucGFnZV9sb2NrLnJlcGxhY2UoJ3tpZH0nLCBTdHJpbmcoaWQpKSwgZGF0YSk7XHJcbiAgfVxyXG5cclxuICBnZXRPcmdMaXN0KG9yZ2lkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5nZXQoUGFnZUJ1aWxkZXJBZGRVUkwuRW5kUG9pbnRzLnBhZ2VfY29uZmlnLm9yZ1BhZ2VMaXN0LnJlcGxhY2UoJ3tvcmdpZH0nLCBvcmdpZCkpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXBsb2FkS2V5KGRhdGEpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTZXJ2aWNlLnBvc3QoUGFnZUJ1aWxkZXJBZGRVUkwuRW5kUG9pbnRzLmF0dGFjaG1lbnQudXBsb2FkS2V5LCBkYXRhKTtcclxuICB9XHJcblxyXG4gIGdldEZvcm1SZXNwb25zZUF0dGFjaG1lbnQoZm9ybWlkLCByZXNwb25zZWlkKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5nZXQoXHJcbiAgICAgIFBhZ2VCdWlsZGVyQWRkVVJMLkVuZFBvaW50cy5hdHRhY2htZW50Lmxpc3QucmVwbGFjZSgne2Zvcm1pZH0nLCBmb3JtaWQpLnJlcGxhY2UoJ3tyZXNwb25zZWlkfScsIHJlc3BvbnNlaWQpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlRm9ybVJlc3BvbnNlQXR0YWNobWVudChmaWxlaWQpIHtcclxuICAgIHJldHVybiB0aGlzLmh0dHBTZXJ2aWNlLmRlbGV0ZShQYWdlQnVpbGRlckFkZFVSTC5FbmRQb2ludHMuYXR0YWNobWVudC5kZWxldGUucmVwbGFjZSgne2ZpbGVpZH0nLCBmaWxlaWQpKTtcclxuICB9XHJcblxyXG4gIGRvd25sb2FkRm9ybVJlc3BvbnNlQXR0YWNobWVudChkYXRhKSB7XHJcbiAgICByZXR1cm4gdGhpcy5odHRwU2VydmljZS5wb3N0KFBhZ2VCdWlsZGVyQWRkVVJMLkVuZFBvaW50cy5hdHRhY2htZW50LmRvd25sb2FkS2V5LCBkYXRhKTtcclxuICB9XHJcbiAgcmV0dXJuVG9MaXN0KCkge1xyXG4gICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoWycvcGFnZXMvcGFnZS1kZXNpZ24vbGlzdCddKTtcclxuICB9XHJcbn1cclxuIl19